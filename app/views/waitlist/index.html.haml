- title(@title)
- stylesheet('appointments')
- javascript('waitlist')

.span.24
  .span-15.prepend-1.mat.padding-top-10.padding-bottom-10
    .span-10
      -# waitlist schedulables
      %h3{:style => 'margin-bottom: 3px;'}
        = label_tag "search_schedulable", "Waitlist for", :class => 'big'
        = select_tag('search_schedulable', options_for_select(@schedulables.collect{ |o| [schedulable_display_name(o, current_user), "#{o.tableize}/#{o.id}"]}, "#{@schedulable.tableize}/#{@schedulable.id}"), :class => 'text')

    -# waitlist appointment states
    .span-5.last{:style => 'padding-top: 7px;'}
      #links
        - build_appointment_state_when_links(params, ['upcoming', 'canceled'], @state, :default => 'upcoming') do |link, separator|
          = link
          = separator
  
    .span-15.last
      %h3{:style => 'font-size: 1.3em;'}== Today is #{Time.now.to_s(:appt_day)}
  
  -# waitlist help
  .span-7.prepend-1.last
    = render(:partial => 'waitlist_help', :locals => {:state => @state})
    
%hr.space

.span-15.prepend-1.last
  .highlight#flash
  
.span-23.prepend-1
  - if @appointments.blank?
    %h2{:style => 'color: #FF6600;'}== The #{@state} waitlist is empty
  - else
    %h3{:style => 'color: #FF6600;'}= pluralize(@appointments.size, "#{@state} appointment")

#waitlist
  = render(:partial => 'waitlist.html.haml', :locals => {:appointments => @appointments})
