var service_providers = new Array();

<% @service_providers.each do |service_provider| -%>
  service_providers.push(new Array(<%= service_provider[0].id %>, '<%= service_provider[1].name %>', <%= service_provider[1].id %>))
<% end %>
  
  
function searchButtonInit()
{
  service_id  = $('service_id').getValue();
  
  /* hide search button unless a service has been selected */
  if (service_id == 0)
  {
    $('search').hide();
  } 
  else 
  {
    $('search').show();
  }
}

function serviceSelected() 
{
  service_id  = $('service_id').getValue();
  options     = $('person_id').options;
  
  options.length = 1;
  
  service_providers.each(function(service_provider)
  {
    if (service_provider[0] == service_id)
    {
      options[options.length] = new Option(service_provider[1], service_provider[2]);
    }
  })
  
  searchButtonInit()
}

document.observe('dom:loaded', function() {
 $('service_id').observe('change', serviceSelected);
 
 /* initialize search button */
 searchButtonInit();
}
)