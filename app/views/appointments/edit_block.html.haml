- title("Manage Schedules")
- stylesheet('calendar', 'jquery.timepickr')
- javascript('calendar_block', 'ui.timepickr', 'jquery.timepickr')

.span-24.last#what
  .span-15.prepend-1.mat.padding-top-10
    .span-15.last.provider
      = label_tag "edit_provider", "Schedule available time for", :class => 'big'
      = select_tag('edit_provider', options_for_select(@providers.collect{ |o| [o.name, "#{o.tableize}/#{o.id}"]}, "#{@provider.tableize}/#{@provider.id}"), :class => 'text')
    %h4.span-15.last#how{:style => 'line-height: 25px;'}
      == Use the calendar to select the available days.
      %br
      == Select the start and end times.
      %br
      == Click 'Schedule Available Time' to add the time to your calendar.
  .span-7.prepend-1.last
    .sidebar.instructions.padding-5
      == What is available time?
      %ul{:style => 'font-size: 11px;'}
        %li== Its the time a person is available to take appointments.
      == Why does everyone start with no available time?
      %ul{:style => 'font-size: 11px;'}
        %li== Its the default, since the system has no way of knowing when a person is available to work.

.span-14.prepend-1.last
  = display_flash

- form_for(Appointment.new, :url => url_for(:subdomain => current_subdomain, :controller => 'appointments', :action => 'create_block'), :method => :post, :html => {:id => 'add_block_free_time_form'}) do |f|
  = hidden_field_tag :provider_type, @provider.tableize
  = hidden_field_tag :provider_id, @provider.id
  = hidden_field_tag :service_id, @free_service.id
  = hidden_field_tag :mark_as, Appointment::FREE
  
  %em.span-14.prepend-1.append-9.last#date_count
    == No dates selected
  
  %hr.space
  
  .span-23.prepend-1.last
    .span-14#free_work_calendar
      = render(:partial => 'shared/calendar', :locals => {:daterange => @daterange, :markings => @calendar_markings})
    .span-6.last#free_work_notes
      = render(:partial => 'calendar/free_work_notes', :locals => {:free_work_appts_by_day => @free_work_appts_by_day})

  %hr.space
  
  .span-14.prepend-1.last
    .span-2{:style => 'font-size: 1.3em; padding-top: 5px;'}
      %h5= label_tag "start_time", "Start time:"
    .span-12.last.padding-top-5
      = text_field_tag 'start_time', '', :class => 'timepicker', :style => "width: 90px; background: #EDF3FE; font-size: 1.4em; padding-left: 3px;"

  .span-14.prepend-1.last
    .span-2{:style => 'font-size: 1.3em; padding-top: 5px;'}
      %h5= label_tag "end_time", "End time:"
    .span-12.last.padding-top-5
      = text_field_tag 'end_time', '', :class => 'timepicker', :style => "width: 90px; background: #EDF3FE; font-size: 1.4em; padding-left: 3px;"

  %hr.space

  #dates
    = text_field_tag 'dates[]', 'date', :id => 'template', :class => 'hide'
    = text_field 'start_at', '', :name => 'start_at', :id => 'start_at', :class => 'hide'
    = text_field 'end_at', '', :name => 'end_at', :id => 'end_at', :class => 'hide'

  %hr.space
  %hr.space
  
  .span-16.last.prepend-1
    %h2#submit
      = f.submit "Schedule Available Time", :class => 'big button'
      %span{:style => 'font-size: 11px;'}
        == or
        = link_to 'Cancel', url_for(:controller => 'calendar', :action => 'show', :provider_type => @provider.tableize, :provider_id => @provider.id, :subdomain => current_subdomain)
    %h2.hide#progress= image_tag 'barbershop.gif'
  