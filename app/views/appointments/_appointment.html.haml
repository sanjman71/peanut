.appointment.review.span-15.last{:syle => 'font-size: 1.5em;'}

  - tag = appointment.canceled? ? 'del' : 'span'
  
  -# what and with are common across all types of appointments
  .span-3.label.text-align-right
    == What:
  .span-12.last.data
    ~ "<#{tag}>#{appointment.service.name}</#{tag}>"
  .span-3.label.text-align-right
    == With:
  .span-12.last.data
    ~ "<#{tag}>#{(appointment.provider || User.anyone).name}</#{tag}>"


  -# when is different for a work appointment vs. a waitlist apointment
  - if appointment.waitlist?
    .span-3.label.text-align-right
      == When:
    .span-12.last.data
      ~ "<#{tag}>#{appointment.start_at.to_s(:appt_short_month_day_year)} - #{appointment.end_at.to_s(:appt_short_month_day_year)}</#{tag}>"
  - else
    .span-3.label.text-align-right
      == When:
    .span-12.last.data
      ~ "<#{tag}>#{appointment.start_at.to_s(:appt_day_date_time)}</#{tag}>"

  -# waitlist appointments have no duration
  - unless appointment.waitlist?
    .span-3.label.text-align-right
      == How Long:
    .span-12.last.data
      ~ "<#{tag}>#{Duration.to_words(appointment.duration)}</#{tag}>"

  - if appointment.recurrence? || appointment.recurrence_parent
    .span-3.label.text-align-right
      == Recurrence:
    .span-12.last.data
      - if appointment.recurrence?
        ~ "<#{tag}>#{appointment_recur_rule_in_words(appointment)}</#{tag}>"
      - else
        ~ "<#{tag}>#{link_to "Parent", appointment_path(appointment.recurrence_parent)}</#{tag}>"

  - if customer_signup
    .span-22.prepend-1.last{:style => 'padding-top: 20px;'}
      == Please enter your name and email below to confirm your appointment and create your account.
      %br
      == Your appointment confirmation and account password will be emailed to you.
    = render :partial => 'appointment_customer_signup'
  - else
    -# show customer for work and wait appointments
    - unless appointment.customer.blank?
      .span-3.label.text-align-right
        == Customer:
      .span-12.last
        %span#customer_default.data
          %span{:id => 'customer_name'}= customer_display_name(appointment.customer, current_user)
          -# the user can choose a customer for a new appointment, with the right privileges
          - if appointment.new_record? and !current_user.blank? and current_user.has_privilege?('company provider', current_company)
            %span{:style => 'font-size: 0.8em; color: #333333;'}== or
            %span= link_to 'Change Customer', '', :id => 'hide_customer_default', :class => 'admin'
        %span#customer_search.hide
          = label_tag "customer_search_text", "Find a customer by typing their name", :class => '', :style => 'font-weight: bold; color: #5500BB; font-size: 0.8em;'
          %br
          = text_field_tag("", "", :id => 'customer_search_text', :class => 'title', :url => customers_path)
          %br
          = link_to 'Cancel', '', :class => 'admin', :id => 'hide_customer_search'
          %span{:style => 'font-size: 0.7em;'}== or
          = link_to 'Create a New Customer', url_for(:controller => 'users', :action => 'new', :role => 'company customer', :subdomain => current_subdomain), :class => 'admin'
          = hidden_field_tag :customer_search_id, 0
